# Supertraits and Coherence @BoxyUwU @WaffleLapkin @lcnr

```rust
{{#include ../../code/examples/trait_solver_5.rs:matters}}
```

<details>
<summary>Solution</summary>

```
{{#include ../../code/examples/stderr/trait_solver_5.stderr}}
```

Coherence is responsible for checking whether the two impls of `Overlap` overlap, and if so emitting an error.

In order for these two impls to overlap there must be some type `T` for which `()` implements `Sub<T>`. 
The `Sub` trait is public so downstream crate could exist which implement `(): Sub<Local>`.

In theory this should mean that these impls overlap, however, the supertrait `Super` *can't* be implement for the type `()` by any downstream crates as `impl Super for () {` would not pass the orphan check in downstream crates. This logic allows for coherence to consider these impls to *not* overlap.

If we were to introduce an impl of `(): Super` to this example then coherence would (rightly) forbid this code.

> Note: This example previously did *not* compile. Coherence was too conservative and rejected this on the basis that `(): Sub<Local>` may be implementable by downstream crates.
> This improvement to coherence occurred when coherence started using the next-gen trait solver on stable. 

</details>
